"use strict";angular.module("meanshopApp",["ngCookies","ngResource","ngSanitize","btford.socket-io","ui.router","ui.bootstrap","ngFileUpload","ngCart","braintree-angular"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookies","$injector",function(a,b,c,d){var e;return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?((e||(e=d.get("$state"))).go("login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){if(d.authenticate){c.isLoggedIn(function(c){c&&c===d.authenticate||(a.preventDefault(),c?b.go("onlyAdmin"):b.go("login"))})}})}]),angular.module("meanshopApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("logout",{url:"/logout?referrer",referrer:"main",template:"",controller:["$state","Auth",function(a,b){var c=a.params.referrer||a.current.referrer||"main";b.logout(),a.go(c)}]}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]).run(["$rootScope",function(a){a.$on("$stateChangeStart",function(a,b,c,d){"logout"===b.name&&d&&d.name&&!d.authenticate&&(b.referrer=d.name)})}]),angular.module("meanshopApp").controller("LoginCtrl",["$scope","Auth","$state","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.go("main")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("meanshopApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("meanshopApp").controller("SignupCtrl",["$scope","Auth","$state","$window",function(a,b,c,d){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.go("main")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("meanshopApp").controller("AdminCtrl",["$scope","$http","Auth","User",function(a,b,c,d){a.users=d.query(),a["delete"]=function(b){d.remove({id:b._id}),a.users.splice(this.$index,1)}}]),angular.module("meanshopApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",authenticate:"admin"}).state("onlyAdmin",{url:"/admin-access",templateUrl:"app/admin/only-admin.html"})}]),angular.module("meanshopApp").controller("MainCtrl",["$scope","$http","socket","Product",function(a,b,c,d){a.products=d.query()}]),angular.module("meanshopApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]);var errorHandler,uploadHander;angular.module("meanshopApp").controller("ProductsCtrl",["$scope","Product",function(a,b){a.products=b.query(),a.$on("search:term",function(c,d){d.length?(a.products=b.search({id:d}),a.query=d):(a.products=b.query(),a.query="")})}]).controller("ProductCatalogCtrl",["$scope","$stateParams","Product",function(a,b,c){a.products=c.catalog({id:b.slug}),a.query=b.slug}]).controller("ProductViewCtrl",["$scope","$state","$stateParams","Product","Auth",function(a,b,c,d,e){a.product=d.get({id:c.id}),a.user=e.getCurrentUser(),a.deleteProduct=function(){d["delete"]({id:a.product._id},function(){b.go("products")},errorHandler(a))}}]).controller("ProductNewCtrl",["$scope","$state","Product",function(a,b,c){a.product={},a.addProduct=function(){return c.save(a.product).$promise.then(function(b){return c.upload(a.product.picture,b._id)}).then(function(a){b.go("viewProduct",{id:a._id})})["catch"](errorHandler(a))}}]).controller("ProductEditCtrl",["$scope","$state","$stateParams","Product","Upload","$timeout",function(a,b,c,d,e,f){a.product=d.get({id:c.id}),a.editProduct=function(){return d.update({id:a.product._id},a.product).$promise.then(function(b){return d.upload(a.product.picture,b._id)}).then(function(a){b.go("viewProduct",{id:a._id})})["catch"](errorHandler(a))},a.upload=uploadHander(a,e,f)}]).constant("clientTokenPath","/api/braintree/client_token").controller("ProductCheckoutCtrl",["$scope","$http","$state","ngCart",function(a,b,c,d){a.errors="",a.paymentOptions={onPaymentMethodReceived:function(e){angular.merge(e,d.toObject()),e.total=e.totalCost,b.post("/api/orders",e).then(function(){d.empty(!0),c.go("products")},function(b){a.errors=b})}}}]),errorHandler=function(a){return function(b){console.log("failed: ",b),a.errors=b}},uploadHander=function(a,b,c){return function(d){d&&!d.$error&&(a.file=d,d.upload=b.upload({url:"/api/products/"+a.product._id+"/upload",file:d}),d.upload.then(function(a){c(function(){d.result=a.data})},function(b){b.status>0&&(console.log(b.status+": "+b.data),errorHandler(a)(b.status+": "+b.data))}),d.upload.progress(function(a){d.progress=Math.min(100,parseInt(100*a.loaded/a.total))}))}},angular.module("meanshopApp").config(["$stateProvider",function(a){a.state("products",{url:"/products",templateUrl:"app/products/templates/product-list.html",controller:"ProductsCtrl"}).state("newProduct",{url:"/products/new",templateUrl:"app/products/templates/product-new.html",controller:"ProductNewCtrl",authenticate:"admin"}).state("viewProduct",{url:"/products/:id/view",templateUrl:"app/products/templates/product-view.html",controller:"ProductViewCtrl"}).state("editProduct",{url:"/products/:id/edit",templateUrl:"app/products/templates/product-edit.html",controller:"ProductEditCtrl",authenticate:"admin"}).state("checkout",{url:"/checkout",templateUrl:"app/products/templates/products-checkout.html",controller:"ProductCheckoutCtrl"}).state("productCatalog",{url:"/products/:slug/catalog",templateUrl:"app/products/templates/product-list.html",controller:"ProductCatalogCtrl"})}]),angular.module("meanshopApp").factory("Product",["$resource","$timeout","Upload","$q",function(a,b,c,d){var e=a("/api/products/:id/:controller",null,{update:{method:"PUT"},catalog:{method:"GET",isArray:!0,params:{controller:"catalog"}},search:{method:"GET",isArray:!0,params:{controller:"search"}}});return e.upload=function(a,e){var f=d.defer();return a&&!a.$error?(a.upload=c.upload({url:"/api/products/"+e+"/upload",file:a}),a.upload.then(function(a){b(function(){f.resolve(a.data)})},function(a){a.status>0&&f.reject(a)}),a.upload.progress(function(a){f.notify({progress:Math.min(100,parseInt(100*a.loaded/a.total))},a)})):f.reject(a?a.$error:"No picture file"),f.promise},e}]),angular.module("meanshopApp").factory("Auth",["$http","User","$cookies","$q",function(a,b,c,d){var e=function(a){return angular.isFunction(a)?a:angular.noop},f={};return c.get("token")&&(f=b.get()),{login:function(g,h){return a.post("/auth/local",{email:g.email,password:g.password}).then(function(a){return c.put("token",a.data.token),f=b.get(),f.$promise}).then(function(a){return e(h)(null,a),a})["catch"](function(a){return this.logout(),e(h)(a.data),d.reject(a.data)}.bind(this))},logout:function(){c.remove("token"),f={}},createUser:function(a,d){return b.save(a,function(g){return c.put("token",g.token),f=b.get(),e(d)(null,a)},function(a){return this.logout(),e(d)(a)}.bind(this)).$promise},changePassword:function(a,c,d){return b.changePassword({id:f._id},{oldPassword:a,newPassword:c},function(){return e(d)(null)},function(a){return e(d)(a)}).$promise},getCurrentUser:function(a){if(0===arguments.length)return f;var b=f.hasOwnProperty("$promise")?f.$promise:f;return d.when(b).then(function(b){return e(a)(b),b},function(){return e(a)({}),{}})},isLoggedIn:function(a){return 0===arguments.length?f.hasOwnProperty("role"):this.getCurrentUser(null).then(function(b){var c=b.role;return e(a)(c),c})},isAdmin:function(a){return 0===arguments.length?"admin"===f.role:this.getCurrentUser(null).then(function(b){var c="admin"===b.role;return e(a)(c),c})},getToken:function(){return c.get("token")}}}]),angular.module("meanshopApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("meanshopApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}}),angular.module("meanshopApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("meanshopApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("meanshopApp").controller("NavbarCtrl",["$scope","Auth","$rootScope","$state","$window","$timeout",function(a,b,c,d,e,f){a.menu=[{title:"Home",state:"main",icon:"home"},{title:"Products",state:"products",icon:"globe"}],a.isCollapsed=!0,a.isLoggedIn=b.isLoggedIn,a.isAdmin=b.isAdmin,a.getCurrentUser=b.getCurrentUser,a.search=function(){c.$broadcast("search:term",a.searchTerm)},a.redirect=function(){d.go("products"),f(function(){var a=e.document.getElementById("searchBox");a&&a.focus()})}}]),angular.module("meanshopApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:"NavbarCtrl"}}),angular.module("meanshopApp").controller("SidebarCtrl",["$scope","Catalog","$location",function(a,b,c){a.catalog=b.query(),a.isActive=function(a){return c.path().indexOf(a)>-1}}]),angular.module("meanshopApp").factory("Catalog",["$resource",function(a){return a("/api/catalogs/:id")}]),angular.module("meanshopApp").factory("socket",["socketFactory",function(a){var b=io("",{path:"/socket.io-client"}),c=a({ioSocket:b});return{socket:c,syncUpdates:function(a,b,d){d=d||angular.noop,c.on(a+":save",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="created";c?(b.splice(e,1,a),f="updated"):b.push(a),d(f,a,b)}),c.on(a+":remove",function(a){var c="deleted";_.remove(b,{_id:a._id}),d(c,a,b)})},unsyncUpdates:function(a){c.removeAllListeners(a+":save"),c.removeAllListeners(a+":remove")}}}]),angular.module("meanshopApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<navbar></navbar><div class=container><div class=row><div class=col-sm-12><h1>Login</h1></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Email</label><input type=email name=email class=form-control ng-model=user.email required></div><div class=form-group><label>Password</label><input type=password name=password class=form-control ng-model=user.password required></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && submitted">Please enter a valid email.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button> <a class="btn btn-default btn-lg btn-register" ui-sref=signup>Register</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a> <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')"><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<navbar></navbar><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<navbar></navbar><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n                                            \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><div><button class="btn btn-inverse btn-lg btn-register" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-login" ui-sref=login>Login</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a> <a class="btn btn-twitter" href="" ng-click="loginOauth(\'twitter\')"><i class="fa fa-twitter"></i> Connect with Twitter</a></div></form></div></div><hr></div>'),a.put("app/admin/admin.html",'<navbar></navbar><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div><footer></footer>'),a.put("app/admin/only-admin.html","<navbar></navbar><div class=container><p>Access restricted to users with the 'admin' role.</p></div><footer></footer>"),a.put("app/main/main.html",'<navbar></navbar><header class=hero-unit id=banner><div class=container><h1>MEANshop</h1><p class=lead>The MEAN stack one stop shop</p><img src=assets/images/logo.bbbaaf62.png alt="the meanstack shop"></div></header><div class=container><div class=row><div class=col-lg-12><h1 class=page-header>Featured Products:</h1><ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="product in products"><li><a ui-sref="viewProduct({id: product._id})" tooltip={{product.description}}>{{product.title}} - <span class=text-muted>{{product.price | currency}}</span></a></li></ul></div></div></div><footer></footer>'),a.put("app/products/templates/_product_form.html",'<div ng-show=errors class="alert alert-danger errors" role=alert><strong>Error(s):</strong><p>{{errors}}</p></div><div class=row><div class=col-md-2><div ngf-select ngf-drop class=drop-box ng-model=product.picture ngf-drag-over-class=dragover ngf-multiple=false ngf-pattern="\'image/*\'" ngf-max-size=15MB accept=image/*>Drop product image here or click to upload button</div><div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div><button accept=image/* type=file class="btn btn-primary" ngf-select ngf-max-size=15MB ng-model=product.picture>Upload picture</button><h2 ng-show=product.picture>Preview</h2><img ngf-src=product.picture width=170px><div ng-show=product.picture>{{product.picture.name}} {{product.picture.$error}} {{product.picture.$errorParam}}</div><img src={{product.imageUrl}} alt={{product.title}} class=img-responsive></div><div class=col-md-10><div class=form-group><label for=title class="col-sm-2 control-label">Title</label><div class=col-sm-10><input ng-model=product.title class=form-control id=title placeholder="product title"></div></div><div class=form-group><label for=year class="col-sm-2 control-label">Description</label><div class=col-sm-10><input ng-model=product.description class=form-control id=description placeholder="Describe your product..."></div></div><div class=form-group><label for=director class="col-sm-2 control-label">Price</label><div class=col-sm-10><input type=number step=any min=0 ng-model=product.price class=form-control id=price placeholder="0.00"></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><input type=submit class="btn btn-primary" value="Save"></div></div></div></div>'),a.put("app/products/templates/product-edit.html","<navbar></navbar><div class=container><h1>Edit Product</h1><form class=form-horizontal role=form ng-submit=editProduct()><div ng-include=\"'app/products/templates/_product_form.html'\"></div></form></div><footer></footer>"),a.put("app/products/templates/product-list.html",'<navbar></navbar><div class=container><div class=row><div class=col-lg-12><h1 class=page-header>Products <small>{{query}}</small></h1></div></div><div class=row><div class=col-md-3 ng-include="\'components/sidebar/sidebar.html\'"></div><div class=col-md-3 ng-show="products.length < 1">No products to show.</div><div class=col-md-3 ng-repeat="product in products"><div class="thumbnail productbox"><div class=productdescription><a ui-sref="viewProduct({id: product._id})"><img src={{product.imageUrl}} alt={{product.title}} class=img-responsive><div class=producttitle>{{product.title}}</div></a><p>{{product.description}}</p></div><div class=productprice><div class=pull-right><ngcart-addtocart id={{product._id}} name={{product.title}} price={{product.price}} template-url=components/ngcart/addtocart.html data=product>BUY</ngcart-addtocart></div><div class=pricetext>{{product.price | currency }}</div></div></div></div></div></div><footer></footer>'),a.put("app/products/templates/product-new.html","<navbar></navbar><div class=container><h1>Create new Product</h1><form class=form-horizontal role=form ng-submit=addProduct()><div ng-include=\"'app/products/templates/_product_form.html'\"></div></form></div><footer></footer>"),a.put("app/products/templates/product-view.html",'<navbar></navbar><div class=container><div class=row><div class=col-lg-12><div class="thumbnail productbox"><div><a ui-sref="viewProduct({id: product._id})"><img src={{product.imageUrl}} alt={{product.title}} class=img-responsive><div class=producttitle>{{product.title}}</div></a><p>{{product.description}}</p></div><div class=productprice><div class=pull-right><ngcart-addtocart id={{product._id}} name={{product.title}} price={{product.price}} template-url=components/ngcart/addtocart.html data=product>BUY</ngcart-addtocart><a ng-show="user.role === \'admin\'" ui-sref="editProduct({id: product._id})" class="btn btn-default btn-sm" role=button>EDIT</a> <a ng-show="user.role === \'admin\'" class="btn btn-default btn-sm" ng-click=deleteProduct()>DELETE</a></div><div class=pricetext>{{product.price | currency }}</div></div></div></div></div></div><footer></footer>'),a.put("app/products/templates/products-checkout.html",'<navbar></navbar><div class=container><div class=row><h1>Cart</h1><ngcart-cart template-url=components/ngcart/cart.html></ngcart-cart></div><div class=row><h1>Choose a payment method</h1><p class=help-block>{{ errors }}</p><br><div class=col-md-6><form><braintree-dropin options=paymentOptions>Loading...</braintree-dropin><input type=submit value="Purchase"></form></div></div></div><footer></footer>'),a.put("components/footer/footer.html",'<div class=container><p>Meanshop | <a href=https://twitter.com/amejiarosario>@amejiarosario</a> | <a href="https://github.com/amejiarosario/meanshop/issues?state=open">Issues</a></p></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>Meanshop</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ui-sref-active=active><a ui-sref={{item.state}}><i class="fa fa-{{item.icon}}"></i> {{item.title}}</a></li></ul><!-- search bar --><form class="navbar-form navbar-left" role=search><div class=form-group><div class=input-group><span class=input-group-addon><span class="fa fa-search"></span></span> <input id=searchBox class="form-control input-large" placeholder=Search ng-model=searchTerm ng-change=search() ng-focus=redirect()></div></div></form><ul class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ui-sref-active=active><a ui-sref=signup><i class="fa fa-user-plus"></i> Sign up</a></li><li ng-hide=isLoggedIn() ui-sref-active=active><a ui-sref=login><i class="fa fa-sign-in"></i> Login</a></li><!-- Actions --><li ng-show=isLoggedIn() ui-sref-active=active class=dropdown dropdown><a href=# class=dropdown-toggle dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><i class="fa fa-cog"></i> {{ getCurrentUser().name }} <span class=caret></span></a><ul class=dropdown-menu><li><a ui-sref=settings><i class="fa fa-key"></i> Change Password</a></li><li ng-show=isAdmin() role=separator class=divider></li><li ng-show=isAdmin()><a ui-sref=admin><i class="fa fa-users"></i> Manage Users</a></li><li ng-show=isAdmin()><a ui-sref=newProduct><i class="fa fa-plus"></i> Create Product</a></li></ul></li><li ng-show=isLoggedIn()><a ui-sref=logout><i class="fa fa-sign-out"></i> Logout</a></li><li><a ui-sref=checkout><ngcart-summary template-url=components/ngcart/summary.html></ngcart-summary></a></li></ul></div></div></div>'),a.put("components/ngcart/addtocart.html",'<span ng-hide=attrs.id><a class="btn btn-primary" ng-disabled=true ng-transclude></a></span> <span ng-show=attrs.id><span ng-show=!inCart()><span ng-show=quantityMax><select name=quantity id=quantity ng-model=q ng-options=" v for v in qtyOpt"></select></span> <a ng-click="ngCart.addItem(id, name, price, q, data)" class="btn btn-danger btn-sm" role=button ng-transclude></a></span> <mark ng-show=inCart()><a class="btn btn-success btn-sm" ng-click=ngCart.removeItemById(id)><i class="fa fa-check"></i> ADDED</a></mark></span>'),a.put("components/ngcart/cart.html",'<div class="alert alert-warning" role=alert ng-show="ngCart.getTotalItems() === 0">Your cart is empty</div><div class="table-responsive col-lg-12" ng-show="ngCart.getTotalItems() > 0"><table class="table table-striped ngCart cart"><thead><tr><th></th><th></th><th>Quantity</th><th>Amount</th><th>Total</th></tr></thead><tfoot><tr ng-show=ngCart.getTax()><td></td><td></td><td></td><td>Tax ({{ ngCart.getTaxRate() }}%):</td><td>{{ ngCart.getTax() | currency }}</td></tr><tr ng-show=ngCart.getShipping()><td></td><td></td><td></td><td>Shipping:</td><td>{{ ngCart.getShipping() | currency }}</td></tr><tr><td></td><td></td><td></td><td>Total:</td><td>{{ ngCart.totalCost() | currency }}</td></tr></tfoot><tbody><tr ng-repeat="item in ngCart.getCart().items track by $index"><td><span ng-click=ngCart.removeItemById(item.getId()) class="glyphicon glyphicon-remove"></span></td><td>{{ item.getName() }}</td><td><span class="glyphicon glyphicon-minus" ng-class="{\'disabled\':item.getQuantity()==1}" ng-click="item.setQuantity(-1, true)"></span>&nbsp;&nbsp; {{ item.getQuantity() | number }}&nbsp;&nbsp; <span class="glyphicon glyphicon-plus" ng-click="item.setQuantity(1, true)"></span></td><td>{{ item.getPrice() | currency}}</td><td>{{ item.getTotal() | currency }}</td></tr></tbody></table></div><style>.ngCart.cart span[ng-click] {\n        cursor: pointer;\n    }\n    .ngCart.cart .glyphicon.disabled {\n        color:#aaa;\n    }</style>'),a.put("components/ngcart/checkout.html",'<div ng-if="service==\'http\' || service == \'log\'"><button class="btn btn-primary" ng-click=checkout() ng-disabled=!ngCart.getTotalItems() ng-transclude>Checkout</button></div><div ng-if="service==\'paypal\'"><form action=https://www.paypal.com/cgi-bin/webscr method=post target=_top ng-show=ngCart.getTotalItems()><input type=hidden name=cmd value="_xclick"> <input type=hidden name=business value="{{ settings.paypal.business }}"> <input type=hidden name=lc value="CA"> <input type=hidden name=item_name value="{{ settings.paypal.item_name }}"> <input type=hidden name=item_number value="{{ settings.paypal.item_number }}"> <input type=hidden name=amount value="{{ ngCart.getSubTotal()}}"> <input type=hidden name=currency_code value="{{ settings.paypal.currency_code }}"> <input type=hidden name=button_subtype value="services"> <input type=hidden name=no_note value="{{ settings.paypal.no_note }}"> <input type=hidden name=tax_rate value="{{ ngCart.getTaxRate()}}"> <input type=hidden name=shipping value="{{ ngCart.getShipping()}}"> <input type=hidden name=bn value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest"> <input type=image src=https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif border=0 name=submit alt="PayPal - The safer, easier way to pay online!"> <img alt="" border=0 src=https://www.paypalobjects.com/en_US/i/scr/pixel.gif width=1 height="1"></form></div><div ng-if="service==\'braintree\'"><form><braintree-dropin options=paymentOptions>Loading...</braintree-dropin><input type=submit value="Purchase"></form></div>'),a.put("components/ngcart/summary.html",'<span class="fa fa-shopping-cart"></span> {{ ngCart.getTotalItems() }} / {{ ngCart.totalCost() | currency }}'),a.put("components/sidebar/sidebar.html",'<div ng-controller=SidebarCtrl class=sidebar><ul class="nav nav-sidebar"><li ng-repeat="category in catalog" ng-class="{active: isActive(category.slug)}"><a ui-sref="productCatalog({slug: category.slug})">{{category.name}}</a></li></ul></div>')}]);